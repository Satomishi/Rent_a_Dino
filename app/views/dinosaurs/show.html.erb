<div class="navbar fixed-top navbar-expand-sm navbar-light navbar-lewagon">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">
      <h3 class="text-white">Rent a Dino</h3>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto">
          <li class="nav-item active">
            <p><%= link_to "Home", dinosaurs_path, class: "nav-link" %></p>
          </li>
          <li class="nav-item dropdown">
            <img class="avatar dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false" src="<%= cl_image_path current_user.avatar.key, crop: :thumb, width: 100 %>" />
            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
              <%= link_to "Add a dino", new_my_dinosaur_path, class: "dropdown-item" %>
              <%= link_to "My Dinos", my_dinosaurs_path, class: "dropdown-item" %>
              <%= link_to "My rents", my_rents_path, class: "dropdown-item" %>
              <%= link_to "Log out", destroy_user_session_path, data: {turbo_method: :delete},
                  class: "dropdown-item" %>
            </div>
          </li>
      </ul>
    </div>
  </div>
</div>
<div class="container page">
  <div class="row">

    <div class="col-12 col-lg-8">
      <% @dino.photos.each do |p| %>
        <%= cl_image_tag p.key, height: 300, width: 700, crop: :fill  %>
      <% end %>

      <h2 class="mt-24"><%=@dino.name%></h2>
      <hr />
      <p class="mt-24"><%=@dino.description%></p>
      <p>Price per day: <%=@dino.price_per_day.fdiv(100)%>€</p>
    </div>

    <div class="col-12 col-lg-4">
      <div data-controller="display-price" data-display-price-dino-price-value="<%=@dino.price_per_day.fdiv(100)%>" class="rounded border p-2 border-bottom">
        <h2 class="text-center"><%="Book your Dino"%></h2>
        <hr />
          <%= simple_form_for([@dino, @booking]) do |f| %>
            <%= f.input :start_date, as: :date, html5: true, label: "Start of booking", input_html: {min: Date.today, data: {action: "change->display-price#compute", display_price_target: "startDate"}}%>
            <%= f.input :end_date, as: :date, html5: true, label: "End of booking", input_html: {min: Date.today, data: {action: "change->display-price#compute", display_price_target: "endDate"}}%>
            <p>TOTAL PRICE: <span data-display-price-target="totalPrice">0 €</span></p>
            <div class="d-flex justify-content-center">
              <%= f.button :submit, "Book now", disabled: true, class: "btn btn-outline-secondary", data: { display_price_target: "button" }%>
            </div>
          <% end %>
      </div>
    </div>

  </div>
</div>  